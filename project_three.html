<!DOCTYPE HTML>
<html>
<head>

<title>Project 3: Canvas Animation</title>

<script>
	var canvas;
	var context;
	var timer;
	
	function init() {
		canvas = document.getElementById("canvas");
		context = canvas.getContext("2d");
		window.addEventListener("resize", resizeCanvas, false);
		window.addEventListener("orientationchange", resizeCanvas, false);
		resizeCanvas();
	}
	
	function resizeCanvas() {
		canvas.width = window.innerWidth - 20;
		canvas.height = window.innerHeight - 20;
		fillBackground();
	}
	
	function fillBackground() {
		context.fillStyle = "black";
		context.fillRect(0, 0, canvas.width, canvas.height);
		drawMoon();
	}
	
	function degreesToRadians(degrees) {
		return(degrees * Math.PI) / 180;
	}
	
	function drawMoon() {
		for (var i = 0; i < 100; i++) {
			drawStars();
		}
		
		context.fillStyle = "rgb(235, 235, 235)";
		context.beginPath();
		context.arc(canvas.width * 0.9, canvas.height * 0.1, canvas.height * 0.15, 0, degreesToRadians(360), true);
		context.fill();
		drawBuildings();
	}
	
	function drawStars() {
		var x = Math.floor(Math.random() * canvas.width);
		var y = Math.floor(Math.random() * canvas.height);
		
		context.beginPath();
		context.moveTo(x, y);
		context.lineTo(x + 5, y);
		context.lineTo(x - 4, y + 3);
		context.lineTo(x + 3, y - 4);
		context.lineTo(x + 1, y + 4);
		context.lineTo(x - 3, y - 2);
		context.closePath();
		context.fillStyle = "white";
		context.fill();
	}
	
	function drawBuildings() {
		var x1 = 0;
		
		context.fillStyle = "rgb(30, 30, 30)";
		for (var i = 0; i < 21; i++) {
			context.fillRect(x1, canvas.height * (Math.floor(45 + Math.random() * 30) / 100), canvas.width / 20, canvas.height);
			x1 += canvas.width / 21;
		}
	}
	
	window.onload = init;
</script>
</head>

<body>
	<canvas id = 'canvas' width = '500' height = '400'></canvas>
</body>
</html>